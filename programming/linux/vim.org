#+setupfile: ../../styles/readtheorg.setup
#+title: Vim

* 命令

#+caption: 模式
| Normal 模式 | =Esc= | 所有命令需要在 Normal 模式下执行 |
|-------------+-------+----------------------------------|
| Insert 模式 | =i=   |                                  |
|-------------+-------+----------------------------------|
| Visual 模式 | =v=   | 可视化选择                       |

#+caption: 文本元素
| 空白字符 | 空格 =\t= =\r= =\n=                            |
|----------+------------------------------------------------|
| 单词     | 由字母、数字、下划线组成，以其他符号分隔的文本 |
|----------+------------------------------------------------|
| 语句     | 由空白字符分隔的文本                           |

** 命令控制

| =u=               | 撤销                           |
|-------------------+--------------------------------|
| =<n><cmd>=        | 命令重复 N 次                  |
|-------------------+--------------------------------|
| =.=               | 重复上一条命令                 |
|-------------------+--------------------------------|
| =<pos><cmd><pos>= | 从开始位置执行命令直到结束位置 |
|-------------------+--------------------------------|
| =:help <cmd>=     | 显示命令帮助                   |

** =:set=

#+caption: 行号
#+begin_src sh
:set number
:set nu
#+end_src

#+caption: 折行
#+begin_src sh
:set wrap   # 折行
:set nowrap # 不折行
#+end_src

#+caption: tab
#+begin_src sh
:set ts=<int>    # tab 长度
:set expandtab   # 转换 tab 为空格
:set noexpandtab # 不转换 tab 为空格
#+end_src

#+caption: 禁止换行时自动延续缩进
#+begin_src sh
:set formatoptions-=cro
#+end_src

** 移动

#+caption: 行间移动
| =<n>G= =:<n>=  | 到第 N 行 |
|----------------+-----------|
| =gg= =1G= =:1= | 到首行    |
|----------------+-----------|
| =G=            | 到尾行    |

#+caption: 行内移动
| =0=       | 到行首                       |
| =$=       | 到行尾                       |
|-----------+------------------------------|
| =f<char>= | 到下一个指定字符             |
| =F<char>= | 到上一个指定字符             |
|-----------+------------------------------|
| =t<char>= | 到下一个指定字符的前一个字符 |
| =T<char>= | 到上一个指定字符的前一个字符 |
|-----------+------------------------------|
| =^=       | 到当前行第一个非空白字符     |
| =g_=      | 到当前行最后一个非空白字符   |

#+attr_html: :class left
file:../images/vim/01.jpg

#+caption: 字符移动
| =e= | 到当前单词结尾 |
| =E= | 到当前语句结尾 |
|-----+----------------|
| =w= | 到下一单词开头 |
| =W= | 到下一语句开头 |

#+attr_html: :class left
file:../images/vim/02.jpg

** 搜索匹配

| =/<pattern>= | 搜索模式         |
|--------------+------------------|
| =n=          | 到下一个匹配位置 |
| =N=          | 到上一个匹配位置 |

| =%= | 到与当前 ={[(= 匹配的括号    |
|-----+------------------------------|
| =*= | 到下一个与当前单词匹配的单词 |
| =#= | 到上一个与当前单词匹配的单词 |

** 插入删除

| =a= | 在光标后插入                   |
|-----+--------------------------------|
| =o= | 在当前行后插入新行             |
| =O= | 在当前行前插入新行             |
|-----+--------------------------------|
| =x= | 删除当前字符                   |
|-----+--------------------------------|
| =cw= | 替换从光标到当前单词结尾的字符 |

** 复制粘贴

| =y=  | 复制             |
| =yy= | 复制整行         |
|------+------------------|
| =d=  | 剪切             |
| =dd= | 剪切整行         |
|------+------------------|
| =p=  | 粘贴在当前位置后 |
| =P=  | 粘贴在当前位置前 |

#+caption: 示例
#+begin_src sh
0y$ # 从行首开始复制到行尾 
ye  # 从当前位置开始复制到单词结尾
#+end_src

** 文件操作

| =:e= =:e!=       | 刷新，重新加载       |
|------------------+----------------------|
| =ZZ=             | 保存，退出           |
|------------------+----------------------|
| =:q=             | 退出                 |
| =:q!=            | 不保存，退出         |
| =:qa!=           | 不保存，退出所有文件 |
|------------------+----------------------|
| =:w [<file>]=    | 保存                 |
| =:wq=            | 保存，退出           |
|------------------+----------------------|
| =:x=             | 退出，在需要时保存   |
|------------------+----------------------|
| =:saveas <file>= | 另存为               |

** 常用命令

#+caption: 批量注释
#+begin_src sh
<from>,<to>s/^/#
<from>,<to>s/^#//
#+end_src

* 配置

#+caption: =~/= 下（ft = file type）
| =.vimrc=             |   |
| =ftdetect/<ext>.vim= |   |
| =ftplugin/<ext>.vim= |   |
| =indent/<ext>.vim=   |   |
| =syntax/<ext>.vim=   |   |

* 资源

1. [[http://coolshell.cn/articles/5426.html][简明 Vim 练级攻略]]
2. [[http://www.oregonwebradio.net/backup_fedora/tutorials/vi_comprehensive/node15.html][Insert ASCII Control Characters in Text]]
